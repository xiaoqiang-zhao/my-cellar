<!DOCTYPE html>
<html>
<head lang="zh-cn">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>Canvas 基础和应用 - 小强赵的个人站点</title>
    <script>
        // 用户通过搜索引擎到文章详情页时，跳到首页并进行哈希路由
        var href = window.location.href.replace(/[^:|\/]\//,function (matchStr){
            return matchStr + 'index.html#!';
        });
        window.location.href = href.replace('/main.html', '');
    </script>
</head>
<body>
<header>
    <h1> 小强赵的个人站点 </h1>
    <h2> 精进自己，服务他人 </h2>
</header>
<div>
    <h1 id="header-1">Canvas 基础和应用</h1>
<blockquote>
<p>重要特性</p>
</blockquote>
<h2 id="header-1-1">概述</h2>
<p>打印功能，画图</p>
<h2 id="header-1-2">基础实践</h2>
<h2 id="header-1-3">应用</h2>
<p>你可能需要将页面的某个部分放到 canvas 中，原理大概是这样：</p>
<ul>
<li>递归取出目标模版的所有 DOM 节点，填充到一个 rederList，并附加是否为顶层元素/包含内容的容器 等信息；</li>
<li>通过 z-index postion float 等 css 属性和元素的层级信息将 rederList 排序，计算出一个canvas 的 renderQueue；</li>
<li>遍历 renderQueue，将 css 样式转为 setFillStyle 可识别的参数，依据 nodeType 调用相对应 canvas 方法，如文本则调用 fillText，图片 drawImage，设置背景色的 div 调用 fillRect等；</li>
<li>将画好的canvas填充进页面。</li>
</ul>
<pre><code class="lang-js">import html2canvas from &#39;html2canvas&#39;;

const dom = document.getElementById(&#39;app&#39;);
html2canvas(dom).then(canvas =&gt; {
    const container = document.getElementById(&#39;body&#39;);
    container.appendChild(canvas);

    // 放到某个图片中
    document.getElementById(&#39;img&#39;).src = canvas.toDataURL();

    // 保存图片

});
</code></pre>
<p><a href="https://html2canvas.hertzen.com/" target="_blank">https://html2canvas.hertzen.com/</a></p>

</div>
</body>
</html>