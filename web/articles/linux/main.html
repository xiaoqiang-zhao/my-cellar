<!DOCTYPE html>
<html>
<head lang="zh-cn">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>Linux 备忘笔记 - 龙则的个人站点</title>
    <script>
        // 用户通过搜索引擎到文章详情页时，跳到首页并进行哈希路由
        var href = window.location.href.replace(/[^:|\/]\//,function (matchStr){
            return matchStr + 'index.html#!';
        });
        window.location.href = href.replace('/main.html', '');
    </script>
</head>
<body>
<header>
    <h1> 龙则的个人站点 </h1>
    <h2> 精进自己，服务他人 </h2>
</header>
<div>
    <h1 id="header-1">Linux 备忘笔记</h1>
<h2 id="header-1-1">chmod -- 权限管理</h2>
<p>Linux系统中的每个文件和目录都有访问许可权限，用它来确定谁可以通过何种方式对文件和目录进行访问和操作。文件或目录的访问权限分为只读，只写和可执行三种。</p>
<pre><code>// 查看文件所属权限
ls -l
// 可以看到下面的权限描述
-rw-rw-r--
drwxrwxr-x
</code></pre><p>注意这里共有10个位置，第一个字符指定了文件类型，<code>d</code> 代表文件夹，<code>-</code> 代表文件。之后的 9 个字母分成三组，r代表只读，w代表写，x代表可执行，横线代表空许可。3 组分别对应不同的用户：文件主 组用户 其他用户。</p>
<p>执行 <code>ls -l</code> 可以看到 <code>dist</code> 文件夹的权限情况：</p>
<pre><code>drwxr-xr-x  root  root  dist
</code></pre><p>我们执行命令 <code>chmod o+w,g+w dist</code>，发现文件夹的权限变成了这样：</p>
<pre><code>drwxrwxrwx  root  root  dist
</code></pre><p>上面命令什么意思？<code>chomd</code> 是变更权限的命令。<code>o+w,g+w</code> 是给指定用户赋指定权限：</p>
<ul>
<li>u 表示“用户（user）”，即文件或目录的所有者。</li>
<li>g 表示“同组（group）用户”，即与文件属主有相同组ID的所有用户。</li>
<li>o 表示“其他（others）用户”。</li>
<li>a 表示“所有（all）用户”。它是系统默认值。</li>
</ul>
<p>操作符号可以是：</p>
<ul>
<li><ul>
<li>添加某个权限。</li>
</ul>
</li>
<li><ul>
<li>取消某个权限。</li>
</ul>
</li>
<li>= 赋予给定权限并取消其他所有权限（如果有的话）。</li>
</ul>
<p>后面两项分别是权限和文件夹。</p>
<h2 id="header-1-2">chgrp -- 改变文件或目录所属的组</h2>
<pre><code>chgrp -R username filename
</code></pre><h2 id="header-1-3">chown -- 更改某个文件或目录的属主</h2>
<pre><code>chown -R username filename
</code></pre><h2 id="header-1-4">VIM 编辑文件</h2>
<p>常用命令</p>
<pre><code>// 将文件在 VIM 编辑器中打开
vi filename
// 唤起输入
i
// 保存退出
esc
:wq!
</code></pre><p>还有一些命令你可能用得到：</p>
<pre><code>// 放弃所作修改而直接退到shell下
:q!
// 另存为
:w newfile
</code></pre><h2 id="header-1-5">进程相关</h2>
<p>启动进程的命令后加 <code>&amp;</code>，将进程指定为后台进程，这样可以在 shell 做一些其他事情而不需要再打开新的窗口，如：</p>
<pre><code>gulp &amp;
// 启动时会给出一个进程ID，如：32750
</code></pre><p>但是关闭 shell 或 断开 ssh 连接后进程就退出了，这在开发机上不是我们的期望，我们期望服务一直运行着，这样就轮到 <code>nohup</code> 登场了：</p>
<pre><code>nohup gulp &amp;
</code></pre><p>那怎么退出进程和重启进程呢？需要知道懂东西有点多我们一点点来。首先是查看进程：</p>
<pre><code>// 查看所有进程
ps -e
// 能找到这样一行进程
32750 pts/1    00:00:05 gulp
</code></pre><p>寻找的过程比较费劲，这里有一些技巧：</p>
<pre><code>// 查看当前用户启动的进程
ps -u
</code></pre><p>可以看到形如下面信息：</p>
<pre><code>USER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
500       1888  0.5  1.9 1339056 159584 pts/1  Sl   10:55   0:05 gulp
</code></pre><p>如果你启动的进程比较多，会依然不好找，下面是配合 <code>grep</code> 进程搜索命令：</p>
<pre><code>ps -ef -l | grep gulp
</code></pre><p>最终我们要拿到 PID，这样我们能对线程做一些操作，比如杀掉它：</p>
<pre><code>kill 1888
</code></pre><ul>
<li><a href="https://cnbin.github.io/blog/2015/06/15/shell-qian-hou-tai-jin-cheng-qie-huan/" target="_blank">Shell 前后台进程切换</a></li>
<li><a href="https://www.zybuluo.com/ghostfn1/note/123409" target="_blank">Linux进程管理命令</a></li>
</ul>
<h2 id="header-1-6">零碎</h2>
<h3 id="header-1-6-1">显示命令的文档</h3>
<p>显示命令的文档，如显示 <code>gulp</code> 使用文档：</p>
<pre><code>man gulp
// 注：按 q 退出
// 并不是所有命令都提供文档
</code></pre><h3 id="header-1-6-2">查看文件行数</h3>
<p>有些系统生成的文件比较大，怎么能不打开文件统计文件行数呢？</p>
<pre><code>wc -lcw file1 file2
</code></pre><p>参数说明：</p>
<pre><code>-c 统计字节数
-l 统计行数
-w 统计字数
-m 统计字符数
</code></pre>
</div>
</body>
</html>